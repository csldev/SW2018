{"version":3,"sources":["webpack:///./src/app.js","webpack:///./src/core/request.js","webpack:///./src/core/plugins/es6-promise.js","webpack:///./src/core/event.js","webpack:///./src/utils/event-names.js","webpack:///./src/utils/settings.js","webpack:///./src/core/router.js"],"names":["App","router","type","Object","request","event","settings","eventNames","Pages","onLaunch","Request","TIMEOUT","response","cookie","header","key","regex","RegExp","results","exec","_fetchCookie","tmpKSessionId","_sliceHeader","getApp","sessionData","minaCookie","kSessionId","qhdi","qhssokey","qhssokeyid","qhssokeycheck","wx","setStorage","data","method","path","server","SERVER_ADDRESS","userAgent","MP_USER_AGENT","minaCookieString","resolve","reject","url","APIVERS","Cookie","success","console","log","statusCode","_saveKSessionId","result","hasOwnProperty","c","d","m","showToast","logout","fail","Error","_request","t","e","exports","module","define","ES6Promise","n","B","r","G","o","process","nextTick","a","i","z","s","J","document","createTextNode","observe","characterData","u","MessageChannel","port1","onmessage","port2","postMessage","setTimeout","W","V","f","Function","require","runOnLoop","runOnContext","l","constructor","p","Z","O","_state","arguments","P","_result","E","h","g","v","TypeError","_","then","nt","error","y","call","S","j","_label","b","tt","et","w","A","_onerror","T","$","_subscribers","length","M","x","C","rt","k","F","ot","promise","Y","U","q","D","K","L","global","self","Promise","prototype","toString","cast","it","N","Array","isArray","X","H","window","I","MutationObserver","WebKitMutationObserver","Q","R","Uint8ClampedArray","importScripts","Math","random","substring","_instanceConstructor","_remaining","_enumerate","_eachEntry","_settledAt","_willSettleAt","all","race","_setScheduler","_setAsap","_asap","polyfill","Event","events","fn","add","forEach","element","delete","EventNames","USER_INFO_UPDATE","LOGOUT","LOGIN","LOGIN_FAILED","Settings","VERSION","ROUTER_PREFIX","Router","pagePaths","webViewPath","pageName","query","undefined","routePath","startsWith","slice","indexOf","navigateTo","_jumpToWebView","encodedUrl","encodeURIComponent"],"mappings":"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","file":"static/js/main.js","sourcesContent":["// app.js\nimport Router from './core/router';\nimport Request from './core/request';\nimport Event from './core/event';\nimport Settings from './utils/settings';\nimport EventNames from './utils/event-names';\n\nApp({\n  router: {\n    type: Object,\n  },\n  request: new Request(),\n  event: new Event(),\n  settings: new Settings(),\n  eventNames: new EventNames(),\n\n  Pages: [\n    'pages/index/index',\n    'pages/xml2can/xml2can',\n  ],\n\n  onLaunch: function () {\n    this.router = new Router(this.Pages, '');\n  },\n\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","/**\r\n * 网络请求类\r\n */\r\nimport Promise from './plugins/es6-promise';\r\n\r\nexport default class Request {\r\n  // 微信请求的默认超时时间\r\n  TIMEOUT = 60000;\r\n\r\n  // 取出 Cookie 中 kSeesionId 并保存\r\n  _fetchCookie(response) {\r\n    let cookie = '';\r\n    if ('Set-Cookie' in response.header) {\r\n      cookie = response.header['Set-Cookie'];\r\n    } else if ('set-cookie' in response.header) {\r\n      cookie = response.header['set-cookie'];\r\n    }\r\n    return cookie;\r\n  }\r\n\r\n  _sliceHeader(cookie, key) {\r\n    const regex = new RegExp(`${key}=((\\\\w)+);`);\r\n    const results = regex.exec(cookie);\r\n    if (results && results[1]) {\r\n      return results[1];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // 取出 Cookie 中 kSeesionId 并保存\r\n  _saveKSessionId(response) {\r\n    const cookie = this._fetchCookie(response);\r\n    const tmpKSessionId = this._sliceHeader(cookie, 'KSESSIONID');\r\n    if (tmpKSessionId) {\r\n      getApp().sessionData.minaCookie.kSessionId = tmpKSessionId;\r\n    }\r\n    const qhdi = this._sliceHeader(cookie, 'qhdi');\r\n    if (qhdi) {\r\n      getApp().sessionData.minaCookie.qhdi = qhdi;\r\n    }\r\n    const qhssokey = this._sliceHeader(cookie, 'qhssokey');\r\n    if (qhssokey) {\r\n      getApp().sessionData.minaCookie.qhssokey = qhssokey;\r\n    }\r\n    const qhssokeyid = this._sliceHeader(cookie, 'qhssokeyid');\r\n    if (qhssokeyid) {\r\n      getApp().sessionData.minaCookie.qhssokeyid = qhssokeyid;\r\n    }\r\n    const qhssokeycheck = this._sliceHeader(cookie, 'qhssokeycheck');\r\n    if (qhssokeycheck) {\r\n      getApp().sessionData.minaCookie.qhssokeycheck = qhssokeycheck;\r\n    }\r\n    wx.setStorage({\r\n      key: 'minaCookie',\r\n      data: getApp().sessionData.minaCookie,\r\n    });\r\n  }\r\n\r\n  _request(method, path, data, header) {\r\n    const server = getApp().settings.SERVER_ADDRESS;\r\n    const userAgent = getApp().settings.MP_USER_AGENT;\r\n    let minaCookieString = '';\r\n    if (getApp().sessionData.minaCookie) {\r\n      if (getApp().sessionData.minaCookie.kSessionId) {\r\n        minaCookieString += `KSESSIONID=${getApp().sessionData.minaCookie.kSessionId};`;\r\n      }\r\n      if (getApp().sessionData.minaCookie.qhdi) {\r\n        minaCookieString += `qhdi=${getApp().sessionData.minaCookie.qhdi};`;\r\n      }\r\n      if (getApp().sessionData.minaCookie.qhssokey) {\r\n        minaCookieString += `qhssokey=${getApp().sessionData.minaCookie.qhssokey};`;\r\n      }\r\n      if (getApp().sessionData.minaCookie.qhssokeyid) {\r\n        minaCookieString += `qhssokeyid=${getApp().sessionData.minaCookie.qhssokeyid};`;\r\n      }\r\n      if (getApp().sessionData.minaCookie.qhssokeycheck) {\r\n        minaCookieString += `qhssokeycheck=${getApp().sessionData.minaCookie.qhssokeycheck};`;\r\n      }\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      wx.request({\r\n        url: server + path,\r\n        method: method,\r\n        data: data,\r\n        header: {\r\n          'content-type': 'application/json',\r\n          APIVERS: 'com.qunhe.instdeco.service.tob-xiaoyi',\r\n          Cookie: minaCookieString,\r\n          'MP-User-Agent': userAgent,\r\n          ...header,\r\n        },\r\n        success: (response) => {\r\n          console.log(`${path} >> `);\r\n          console.log(response);\r\n          if (response.statusCode === 200) {\r\n            this._saveKSessionId(response);\r\n            const {\r\n              data: result,\r\n            } = response;\r\n            if (result.hasOwnProperty('c')) {\r\n              if (result.c === '0') {\r\n                if ('d' in result) {\r\n                  resolve(result.d);\r\n                } else {\r\n                  resolve({});\r\n                }\r\n              } else {\r\n                reject(result.c, result.m);\r\n              }\r\n            } else {\r\n              resolve(result);\r\n            }\r\n          } else if (response.statusCode === 401) {\r\n            // 登录过期，清除本地登录信息\r\n            console.log('401 logout');\r\n            getApp().showToast('登录过期，请重新登录');\r\n            getApp().logout();\r\n            reject(response.statusCode);\r\n          } else {\r\n            reject(response.statusCode);\r\n          }\r\n        },\r\n        fail: () => {\r\n          reject(new Error('请求失败'));\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  get(path, data = {}, header = {}) {\r\n    return this._request('GET', path, data, header);\r\n  }\r\n\r\n  post(path, data = {}, header = {}) {\r\n    return this._request('POST', path, data, header);\r\n  }\r\n\r\n  delete(path, data = {}, header = {}) {\r\n    return this._request('DELETE', path, data, header);\r\n  }\r\n\r\n  put(path, data = {}, header = {}) {\r\n    return this._request('PUT', path, data, header);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/request.js","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){\"use strict\";function t(t){var e=typeof t;return null!==t&&(\"object\"===e||\"function\"===e)}function e(t){return\"function\"==typeof t}function n(t){B=t}function r(t){G=t}function o(){return function(){return process.nextTick(a)}}function i(){return\"undefined\"!=typeof z?function(){z(a)}:c()}function s(){var t=0,e=new J(a),n=document.createTextNode(\"\");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<W;t+=2){var e=V[t],n=V[t+1];e(n),V[t]=void 0,V[t+1]=void 0}W=0}function f(){try{var t=Function(\"return this\")().require(\"vertx\");return z=t.runOnLoop||t.runOnContext,i()}catch(e){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[Z]&&O(r);var o=n._state;if(o){var i=arguments[o-1];G(function(){return P(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&\"object\"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError(\"You cannot resolve a promise with itself\")}function d(){return new TypeError(\"A promises callback cannot return that same promise.\")}function _(t){try{return t.then}catch(e){return nt.error=e,nt}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){G(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},\"Settle: \"+(t._label||\" unknown promise\"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===tt?S(t,e._result):e._state===et?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===nt?(j(t,nt.error),nt.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===$&&(t._result=e,t._state=tt,0!==t._subscribers.length&&G(T,t))}function j(t,e){t._state===$&&(t._state=et,t._result=e,G(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+tt]=n,o[i+et]=r,0===i&&t._state&&G(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?P(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function P(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===nt?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==$||(i&&c?g(n,s):a?j(n,u):t===tt?S(n,s):t===et&&j(n,s))}function x(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function C(){return rt++}function O(t){t[Z]=rt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(){return new Error(\"Array Methods must be provided an Array\")}function F(t){return new ot(this,t).promise}function Y(t){var e=this;return new e(U(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})}function q(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function K(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function L(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if(\"[object Promise]\"===r&&!n.cast)return}t.Promise=it}var N=void 0;N=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};var U=N,W=0,z=void 0,B=void 0,G=function(t,e){V[W]=t,V[W+1]=e,W+=2,2===W&&(B?B(a):X())},H=\"undefined\"!=typeof window?window:void 0,I=H||{},J=I.MutationObserver||I.WebKitMutationObserver,Q=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),R=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,V=new Array(1e3),X=void 0;X=Q?o():J?s():R?u():void 0===H&&\"function\"==typeof require?f():c();var Z=Math.random().toString(36).substring(2),$=void 0,tt=1,et=2,nt={error:null},rt=0,ot=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[Z]||O(this.promise),U(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,k())}return t.prototype._enumerate=function(t){for(var e=0;this._state===$&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==$)this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof o)this._remaining--,this._result[e]=t;else if(n===it){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===$&&(this._remaining--,t===et?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(tt,e,t)},function(t){return n._settledAt(et,e,t)})},t}(),it=function(){function t(e){this[Z]=C(),this._result=this._state=void 0,this._subscribers=[],p!==e&&(\"function\"!=typeof e&&D(),this instanceof t?x(this,e):K())}return t.prototype[\"catch\"]=function(t){return this.then(null,t)},t.prototype[\"finally\"]=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return it.prototype.then=l,it.all=F,it.race=Y,it.resolve=h,it.reject=q,it._setScheduler=n,it._setAsap=r,it._asap=G,it.polyfill=L,it.Promise=it,it});\n\n\n// WEBPACK FOOTER //\n// ./src/core/plugins/es6-promise.js","/**\r\n * 小程序页面之间通信的 event\r\n * 目前只实现一个事件对应一个方法\r\n */\r\nexport default class Event {\r\n  events = {};\r\n\r\n  on(event, fn) {\r\n    if (typeof fn !== 'function' || !event) {\r\n      return;\r\n    }\r\n    if (!this.events[event]) {\r\n      this.events[event] = new Set();\r\n    }\r\n    this.events[event].add(fn);\r\n  }\r\n\r\n  emit(event, data) {\r\n    if (typeof this.events[event] !== 'object') {\r\n      return;\r\n    }\r\n    console.log(`emit ${event}`);\r\n    this.events[event].forEach((element) => {\r\n      if (typeof element === 'function') {\r\n        element(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  off(event, fn) {\r\n    if (typeof this.events[event] !== 'object' || typeof fn !== 'function') {\r\n      return;\r\n    }\r\n    this.events[event].delete(fn);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","export default class EventNames {\r\n  USER_INFO_UPDATE = 'user_info_update';\r\n  LOGOUT = 'logout';\r\n  LOGIN = 'login';\r\n  LOGIN_FAILED = 'login_failed';\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/event-names.js","export default class Settings {\r\n  VERSION = '1.0'\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/settings.js","/**\r\n * 路由类\r\n */\r\nconst ROUTER_PREFIX = 'https://www.kujiale.com';\r\n\r\nexport default class Router {\r\n  /**\r\n   * 初始化路由\r\n   * @param {*} pagePaths 所有页面的路由表信息\r\n   * @param {*} webViewPath webView页面的路由信息\r\n   */\r\n  constructor(pagePaths, webViewPath) {\r\n    this.pagePaths = pagePaths;\r\n    this.webViewPath = webViewPath;\r\n  }\r\n\r\n  /**\r\n   * 组装本地页面的路由信息\r\n   * @param {*} pageName 本地的页面名，注意默认在 /pages 目录下，并且页面目录和页面需要命名一致\r\n   * @param {*} query query 值\r\n   */\r\n  nativePage(pageName, query) {\r\n    let url = `${ROUTER_PREFIX}/pages/${pageName}/${pageName}`;\r\n    if (query !== undefined && Object.keys(query).length > 0) {\r\n      url += '?';\r\n      for (const key in query) {\r\n        url += `${key}=${query[key]}&`;\r\n      }\r\n    }\r\n    return url;\r\n  }\r\n\r\n  navigateTo(routePath) {\r\n    const url = routePath;\r\n    if (!(typeof (url) === 'string')) {\r\n      return;\r\n    }\r\n\r\n    // 如果在 pages 里面有定义这个 path, 直接跳转小程序页面\r\n    if (url.startsWith(ROUTER_PREFIX)) {\r\n      const path = url.slice(ROUTER_PREFIX.length + 1, url.indexOf('?') > 0 ? url.indexOf('?') : url.length);\r\n      if (this.pagePaths.indexOf(path) > -1) {\r\n        console.log(`navigate to local page ${url.slice(ROUTER_PREFIX.length)}`);\r\n        wx.navigateTo({\r\n          url: url.slice(ROUTER_PREFIX.length),\r\n        });\r\n      } else {\r\n        this._jumpToWebView(url);\r\n      }\r\n    } else {\r\n      this._jumpToWebView(url);\r\n    }\r\n  }\r\n\r\n  _jumpToWebView(url) {\r\n    console.log(`jump to web page ${url}`);\r\n    const encodedUrl = JSON.stringify(encodeURIComponent(url));\r\n    wx.navigateTo({\r\n      url: `/pages/web-page/web-page?url=${encodedUrl}&from=mp`,\r\n    });\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/router.js"],"sourceRoot":""}